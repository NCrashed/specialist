\paragraph{Проектирование структуры базы данных} \hfill

Проектирование структуры БД является очень важным этапом, от которого зависят последующие этапы разработки АИС. Время, затраченное разработчиком на проектирование схемы БД, обычно окупается высокой скоростью реализации проекта.

На этапе внешнего проектирования связанного с анализом предметной области были выделены объекты, которые должны использоваться для представления предметной области. То есть была проведена предварительная структуризация объектов предметной области: объекты реального мира подверглись классификации, была зафиксирована совокупность подлежащих отображению в БД типов объектов. Для каждого типа объектов были зафиксирована совокупность свойств, посредством которых должны описываться конкретные объекты этого типа в БД, виды отношений (взаимосвязей) между этими объектами. Следующим шагом является решение вопроса, какая информация об объектах должна быть представлена в БД и как ее представить с помощью данных. Сущность инфологического этапа проектирования является установление соответствия между состоянием предметной области, его восприятием и представлением в БД.

На этапе инфологического проектирования используется неформальная модель предметной области типа <<сущность -- связь>>. Это модель позволяет моделировать объекты ПО, взаимоотношения объектов. Основное назначение неформальной модели <<сущность -- связь>> является семантическое описание предметной области и представление информации для обоснования выбора видов моделей и структур данных, которые в дальнейшем будут использованы в системе. Для построения модели типа <<сущность -- связь>> используются три основных конструктивных элемента для представления составляющих ПО – сущность, атрибут и связь.

\textbf{Сущность} -- это собирательное понятие, некоторая абстракция реально существующего объекта, процесса или явления, о котором необходимо хранить информацию в системе. В качестве сущности в моделях ПО рассматриваются материальные (сотрудник, справка и т.д.) и не материальные (описание некоторого явления, рефераты научных статей и т.д.) объекты реальной действительности. В моделях ПО типа <<сущность -- связь>> каждая рассматриваемая конкретная сущность является узловой точкой сбора информации об этой сущности. В модели также используется понятие <<экземпляр сущности>>. Тип сущности определяет набор однородных объектов, а экземпляр сущности -- конкретный объект в наборе.

\textbf{Атрибут} -- это поименованная характеристика сущности, которая принимает значение из некоторого множества значений. В модели атрибут выступает в качестве средства, с помощью которого моделируются свойства сущностей. Основное назначение атрибута – описание свойства сущности, а также идентификация экземпляра сущностей.

\textbf{Связь} выступает в модели в качестве средства, с помощью которого представляются отношения между сущностями, имеющими место в предметной области. Тип связи рассматривается между типами сущностей, а конкретный экземпляр связи рассматриваемого типа существует между конкретными экземплярами рассматриваемых типов сущностей. При анализе связей между сущностями могут встречаться бинарные (между двумя сущностями), тернарные (между тремя сущностями) и, в общем случае n-арные связи. Может также встречаться унарные (рекурсивные) связи, когда экземпляр определенного типа сущности связан с другим экземпляром той же самой сущности. Наиболее часто встречаются бинарные связи. Для определения характера взаимосвязей между двумя типами сущностей используются прямое и обратное отображения между двумя соответствующими множествами экземпляров сущностей. При проведении классификации видов связей обычно выделяют следующие виды связей: 1:1, 1:M, M:1, M:N.

Для представления инфологической модели предметной области могут использоваться два варианта записи:
\begin{itemize}
\item Спецификационная форма инфологической модели ПО;
\item Графическая диаграмма инфологической модели ПО.
\end{itemize}

\subsubsubsection{Обоснование выбора инструментария проектирования}
В качестве инструментария проектирования даталогической модели базы данных был выбран проблемно-ориентированный язык Haskell Persistent. Данный язык обладает существенными преимуществами перед аналогами:
\begin{itemize}
\item Интеграция с языком программирования Haskell -- типы БД непосредственно используются в проектируемой программе без ручного кодирования;
\item Автоматические миграции -- если схема БД изменилась во время проектирования, то данный язык предоставляет средства автоматической миграции данных между схемами;
\item Краткая форма записи и текстовый формат. Благодаря спецификационной записи описание схемы базы данных имеют минимальный объем и позволяет использовать все преимущества системы контроля версий и интегрированных систем разработки.
\end{itemize}

\paragraph{Инфологическая модель базы данных} \hfill

В результате анализа предметной области определены сущности, их атрибуты, взаимосвязь между ними и разработана инфологическая модель базы данных.

Схема инфологической модели представлена в графической части дипломной работы на листе «Инфологическая модель».

\paragraph{Описание сущностей и их атрибуты} \hfill

Выделены следующие сущности предметной области. Описание сущностей и атрибутов представлено в таблицах ниже.

Условные обозначения: РК (primary key) – первичный ключ, FK –внутренний ключ.


\begin{table}[h!]
\centering
\caption{Сущность <<Документ>>}
\label{table:entityDocument}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код документа (PK) & Идентифицирующий атрибут \\
Заголовок & Название документа \\
Аннотация & Краткое описание документа \\
Содержание & Содержание документа, полное \\
Временная метка & Время публикации документа \\
Временная метка сбора & Время сбора документа \\
Ссылка & Адрес в сети Интернет \\
Источник (FK) & Идентификатор источника документа \\
Рубрика (FK) & Идентификатор категории документа \\
Экспортирован & Признак того, что документ был экспортирован \\

\end{tabular}
\end{table}


\begin{table}[h!]
\centering
\caption{Сущность <<Метка>>}
\label{table:entityTag}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код метки (PK) & Идентифицирующий атрибут \\
Название & Название метки \\

\end{tabular}
\end{table}

\begin{table}[h!]
\centering
\caption{Сущность <<Приложение>>}
\label{table:entityAttachment}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код приложения (PK) & Идентифицирующий атрибут \\
Название & Название приложения \\
Название файла & Название файла приложения \\
Данные & Тело файла приложения \\

\end{tabular}
\end{table}


\begin{table}[h!]
\centering
\caption{Сущность <<Источник>>}
\label{table:entitySource}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код источника (PK) & Идентифицирующий атрибут \\
Название & Название источника \\

\end{tabular}
\end{table}


\begin{table}[h!]
\centering
\caption{Сущность <<Рубрика>>}
\label{table:entityRubric}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код рубрики (PK) & Идентифицирующий атрибут \\
Название & Название рубрики \\
Родительская рубрика (FK) & Код родительской рубрики \\
Скрытость & Признак скрытости рубрики от пользователя \\

\end{tabular}
\end{table}


\begin{table}[h!]
\centering
\caption{Сущность <<Операция>>}
\label{table:entityResync}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код операции (PK) & Идентифицирующий атрибут \\
Время старта & Метка времени старта операции \\
Время конца & Метка времени окончания операции \\
Прогресс & Значение доли завершенности операции \\
Успех & Признак успешного завершения операции \\
Ошибка & Описание ошибки операции \\
Команда & Номер команды операции \\
Обработано & Количество обработанных документов \\
Отмена & Признак отмененной операции \\
Рубрика источник (FK) & Код рубрики-источника для документов \\
Рубрика назначение (FK) & Код рубрики-назначения для документов \\
Имя файла & Название файла-архива для экспорта документов \\
Папка импорта & Название папки для импорта документов \\
Папка экспорта & Название папки для экспорта документов \\
Запрос удаления (FK) & Код запроса для удаления документов \\
Запрос экспорта (FK) & Код запроса для экспорта документов \\
Извлечение идентификаторов & Признак необходимости записи идентификаторов при экспорте \\

\end{tabular}
\end{table}


\begin{table}[h!]
\centering
\caption{Сущность <<Запрос>>}
\label{table:entityQuery}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код запроса (PK) & Идентифицирующий атрибут \\
Полнотекстовый запрос & Основная часть запроса \\
Дополнительный запрос & Дополнительные фильтры результатов \\
Начальная дата & Минимальная дата результата \\
Конечная дата & Максимальная дата результата  \\
Начальная дата сбора & Минимальная дата сбора результата \\
Конечная дата сбора & Максимальная дата сбора результата \\
Смещение результата & Количество документов, которое следует опустить из результатов \\
Размер страницы & Максимальное количество документов, которое нужно вернуть в результатах \\
Поле сортировки & Поле, по которому следует отсортировать результаты \\
Направление сортировки & Сортировка по убыванию или возрастанию \\
Без рубрики & Признак поиска только нерубрицированных документов \\
Без источника & Признак поиска только документов без источника \\
Родительская рубрика (FK) & Код родительской рубрики, в которой хранится запрос \\
Без меток & Признак поиска только документов без меток \\


\end{tabular}
\end{table}

\begin{table}[h!]
\centering
\caption{Сущность <<Настройки>>}
\label{table:entityOptions}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код настроек (PK) & Идентифицирующий атрибут \\
Показ скрытых рубрик & Отображение системных рубрик пользователю в рубрикаторе \\
Показ подробной информации & Отображение отладочной информации о запросе \\
Показ подробного поиска & Отображение дополнительных полей запроса \\
Отключение импорта & Отключение автоматического импорта документов \\
Включение экспорта & Отображение возможностей экспорта документов в интерфейсе \\ 
\end{tabular}
\end{table}

\begin{table}[h!]
\centering
\caption{Сущность <<Прогноз>>}
\label{table:entityPredict}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код прогноза (PK) & Идентифицирующий атрибут \\
Сохраненный запрос (FK) & Код сохраненного запроса для прогноза \\
Название & Название прогноза \\
Описание & Описание прогноза \\
Точка отсчета & Начальная точка прогноза \\
Окно эволюции & Количество точек от текущей даты для обучения алгоритма \\
Отключен & Признак неактивности прогноза \\
\end{tabular}
\end{table}

\begin{table}[h!]
\centering
\caption{Сущность <<Измерение>>}
\label{table:entityMeasure}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код измерения (PK) & Идентифицирующий атрибут \\
Прогноз (FK) & Код прогноза, для которого проводилось измерение \\
День & Точка, в которой замерялось значение \\
Значение & Количество результатов по запросу прогноза \\

\end{tabular}
\end{table}

\begin{table}[h!]
\centering
\caption{Сущность <<Популяция>>}
\label{table:entityPopulation}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код популяции (PK) & Идентифицирующий атрибут \\
Прогноз (FK) & Код прогноза, к которому относится популяция \\
Поколение & Текущий номер поколения популяции \\

\end{tabular}
\end{table}

\begin{table}[h!]
\centering
\caption{Сущность <<Формула>>}
\label{table:entityFormula}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код формулы (PK) & Идентифицирующий атрибут \\
Популяция (FK) & Код популяции, к которой относится формула \\
Текст & Текстовое представление формулы \\
Приспособленность & Значение приспособленности формулы \\

\end{tabular}
\end{table}

\begin{table}[h!]
\centering
\caption{Сущность <<Приспособленность>>}
\label{table:entityFittness}
\begin{tabular}{L{8cm}|L{8cm}}
\multicolumn{1}{C{8cm}|}{Имя атрибута} & 
\multicolumn{1}{C{8cm}}{Описание атрибута} \\
\hline\hline

Код приспособленности (PK) & Идентифицирующий атрибут \\
Популяция (FK) & Код популяции, к которой относится формула \\
Лучший & Лучшее значение функции приспособленности \\
Среднее & Среднее значение функции приспособленности \\
Поколение & Значение поколения, для которого производились замеры \\

\end{tabular}
\end{table}

\clearpage
\clearpage
\paragraph{Связи между сущностями} \hfill

Рассмотрим связи между сущностями, выделенными и описанными выше. На основе взаимодействия сущностей в предметной области определим отношения между ними и запишем в таблицу~\ref{table:entityRelations}.

\begin{table}[h!]
\centering
\caption{Связи между сущностями}
\label{table:entityRelations}
\begin{tabular}{C{1cm}|L{6cm}|C{2cm}|L{6cm}}
\multicolumn{1}{C{1cm}|}{№} & 
\multicolumn{1}{C{6cm}|}{Наименование связи} & 
\multicolumn{1}{C{2cm}|}{Тип связи} & 
\multicolumn{1}{C{6cm}}{Сущность} \\
\hline\hline

1 & Принадлежит рубрике & M:1 & Документ -- Рубрика \\
2 & Имеет источник & M:1 & Документ -- Источник \\
3 & Имеет метку & M:M & Документ -- Метка \\
4 & Имеет приложение & M:M & Документ -- Приложение \\
5 & Вкладывается в рубрику & M:1 & Рубрика -- Рубрика \\
6 & Имеет рубрику-источник & M:1 & Операция -- Рубрика \\
7 & Имеет рубрику-назначение & M:1 & Операция -- Рубрика \\
8 & Имеет запрос удаления & M:1 & Операция -- Запрос \\
9 & Имеет запрос экспорта & M:1 & Операция -- Запрос \\
10 & Прикрепляется к рубрике & M:1 & Запрос -- Рубрика \\
11 & Фильтрует с тегами & M:M & Запрос -- Метка \\
12 & Фильтрует без тегов & M:M & Запрос -- Метка \\
13 & Фильтрует c рубриками & M:M & Запрос -- Рубрика \\
14 & Фильтрует c источником & M:M & Запрос -- Источник \\
15 & Берет данные из & M:1 & Прогноз -- Запрос \\
16 & Вычисляется с помощью & M:1 & Измерение -- Прогноз \\
17 & Прогнозирует & M:1 & Популяция -- Прогноз \\
18 & Включается в популяцию & M:1 & Формула -- Популяция \\
19 & Хранит историю о & M:1 & Приспособленность -- Популяция \\
\end{tabular}
\end{table}

\paragraph{Даталогическая модель данных} \hfill

Для разработки даталогической модели данных была проведена ручная операция перевода инфологической модели в проблемно-ориентированный язык Haskell Persistent. В результате была получена схема даталогической модели данных, представленная в графической части работы.

Проблемно-ориентированный язык Haskell Persistent автоматически генерирует скрипт на языке SQL для создания всех таблиц, отношений и ограничений в БД, а также проводит миграции данных между разными версиями даталогической модели данных при спиральной разработке приложения.



\paragraph{Разработка архитектуры АСОИУ} \hfill